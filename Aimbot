local RunService = game:GetService("RunService")
local Players = game:GetService("Players")

local Client = Players.LocalPlayer

local function GetClosestPlayer(distance, returnDistance)
	local newLow = math.huge
	local currentTarget = nil

	for _, player in ipairs(Players:GetPlayers()) do
		local rootPart = player.Character:FindFirstChild("HumanoidRootPart")
		local humanoid = player.Character:FindFirstChildWhichIsA("Humanoid")
		
		-- Check that the player is a valid target
		if rootPart and humanoid and humanoid.Health > 0 then
			local distanceBetweenCharacter = Client:DistanceFromCharacter(rootPart.Position)
			
			-- Check the distance between player and distance parameter
			if distanceBetweenCharacter <= distance and currentTarget > distanceBetweenCharacter then
				newLow = distanceBetweenCharacter
				currentTarget = player
			end
			
		end
	end
	
end


